import{u as v,j as e,H as N,L as w,a as y,R as _}from"./app-CirTf5Yo.js";import{F as C,A as F}from"./AdminLayout-Sqp-eTC1.js";import{P as k}from"./PrimaryButton-B8RsrJqu.js";import{I as r}from"./InputLabel-DFqVxiMs.js";import{T as o}from"./TextInput-DxP4_qNE.js";import{I as m}from"./InputError-BQ6tmqpr.js";import{C as I}from"./react-select-creatable.esm-DOtFPnlq.js";import"./ApplicationLogo-BvZcoxD7.js";import"./logoWhite-C0-n3M0p.js";import"./NewspaperIcon-zyxNcIO2.js";import"./Dropdown-CgCWHkPA.js";import"./transition-I90Zg0OX.js";import"./index-Br65vfOr.js";function A({onFilesAdded:d}){return _.useRef(null),e.jsxs("div",{children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/webp",onChange:n=>d(Array.from(n.target.files)),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-smd-soft-green/10 file:text-smd-soft-green hover:file:bg-smd-soft-green/20"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sube una o más imágenes en formato WEBP (máx. 1MB cada una)."})]})}function E({hotel:d,amenities:n}){const t=d.data,{data:s,setData:l,post:$,processing:g,errors:i}=v({_method:"PATCH",name:t.name||"",address:t.address||"",description:t.description||"",price_range:t.price_range||"",instagram:t.instagram||"",facebook:t.facebook||"",youtube:t.youtube||"",phone:t.phone||"",email:t.email||"",web:t.web||"",amenities:t.amenities.map(a=>a.id)||[],images:[],images_to_delete:[]}),u=n.data.map(a=>({value:a.id,label:a.name})),x=u.filter(a=>s.amenities.includes(a.value)),h=a=>{const b=a?a.map(c=>(c.__isNew__,c.value)):[];l("amenities",b)},p=a=>{l("images",[...s.images,...a])},f=a=>{l("images_to_delete",[...s.images_to_delete,a])},j=a=>{a.preventDefault(),y.post(route("admin.hotels.update",t),s,{forceFormData:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(N,{title:`Editar Hotel: ${t.name}`}),e.jsx("h1",{className:"text-3xl font-bold",children:"Editar Hotel"}),e.jsxs("form",{onSubmit:j,className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Información General"}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"name",value:"Nombre del Hotel"}),e.jsx(o,{id:"name",value:s.name,onChange:a=>l("name",a.target.value),className:"mt-1 block w-full",isFocused:!0}),e.jsx(m,{message:i.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"price_range",value:"Rango de Precio ($, $$, $$$)"}),e.jsx(o,{id:"price_range",value:s.price_range,onChange:a=>l("price_range",a.target.value),className:"mt-1 block w-full"}),e.jsx(m,{message:i.price_range,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(r,{htmlFor:"address",value:"Dirección"}),e.jsx(o,{id:"address",value:s.address,onChange:a=>l("address",a.target.value),className:"mt-1 block w-full"}),e.jsx(m,{message:i.address,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(r,{htmlFor:"description",value:"Descripción"}),e.jsx("textarea",{id:"description",value:s.description,onChange:a=>l("description",a.target.value),rows:"5",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),e.jsx(m,{message:i.description,className:"mt-2"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-smd-dark",children:"Contacto y Redes Sociales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"phone",value:"Teléfono"}),e.jsx(o,{id:"phone",value:s.phone,onChange:a=>l("phone",a.target.value),className:"mt-1 w-full"}),e.jsx(m,{message:i.phone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"email",value:"Email"}),e.jsx(o,{id:"email",type:"email",value:s.email,onChange:a=>l("email",a.target.value),className:"mt-1 w-full"}),e.jsx(m,{message:i.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"web",value:"Página Web"}),e.jsx(o,{id:"web",type:"url",value:s.web,onChange:a=>l("web",a.target.value),className:"mt-1 w-full"}),e.jsx(m,{message:i.web,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"instagram",value:"Instagram"}),e.jsx(o,{id:"instagram",type:"url",value:s.instagram,onChange:a=>l("instagram",a.target.value),className:"mt-1 w-full"}),e.jsx(m,{message:i.instagram,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"facebook",value:"Facebook"}),e.jsx(o,{id:"facebook",type:"url",value:s.facebook,onChange:a=>l("facebook",a.target.value),className:"mt-1 w-full"}),e.jsx(m,{message:i.facebook,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"youtube",value:"YouTube"}),e.jsx(o,{id:"youtube",type:"url",value:s.youtube,onChange:a=>l("youtube",a.target.value),className:"mt-1 w-full"}),e.jsx(m,{message:i.youtube,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Comodidades (Amenities)"}),e.jsx(I,{isMulti:!0,options:u,defaultValue:x,onChange:h,className:"mt-1",placeholder:"Selecciona o escribe para crear...",formatCreateLabel:a=>`Añadir "${a}"`})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Galería de Imágenes"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:t.images.filter(a=>!s.images_to_delete.includes(a.id)).map(a=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a.url,className:"w-full h-32 object-cover rounded-md"}),e.jsx("button",{type:"button",onClick:()=>f(a.id),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(C,{className:"h-5 w-5"})})]},a.id))}),e.jsx(A,{onFilesAdded:p}),i.images&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.images})]}),e.jsxs("div",{className:"mt-6 flex justify-end items-center gap-smd-16",children:[e.jsx(w,{href:route("admin.hotels.index"),className:"px-4 py-2 text-gray-600",children:"Cancelar"}),e.jsx(k,{disabled:g,className:"px-6 py-2 bg-smd-soft-green text-white font-bold rounded-lg hover:bg-green-700 disabled:bg-gray-400",children:"Actualizar Hotel"})]})]})]})}E.layout=d=>e.jsx(F,{children:d,title:"Editar Hotel"});export{E as default};
