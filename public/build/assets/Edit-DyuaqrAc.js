import{r as c,u as N,j as e,H as w,L as y,a as C,R as _}from"./app-f3XBro1Q.js";import{A as F}from"./AdminLayout-WlEzAwj2.js";import{P as k}from"./PrimaryButton-CSCHhJy-.js";import{I as i}from"./InputLabel-D3Wgjveg.js";import{T as m}from"./TextInput-DF_qL7hS.js";import{I as o}from"./InputError-B4wDH1U9.js";import{C as E}from"./react-select-creatable.esm-Blh21VPQ.js";import"./ApplicationLogo-C8yQ77qy.js";import"./logoWhite-C0-n3M0p.js";import"./NewspaperIcon-DzMc6Czj.js";import"./Dropdown-B3xMmJkq.js";import"./transition-CyBsqfRx.js";import"./index-Cy2m6-nW.js";function I({title:n,titleId:d,...t},s){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":d},t),n?c.createElement("title",{id:d},n):null,c.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const A=c.forwardRef(I);function R({onFilesAdded:n}){return _.useRef(null),e.jsxs("div",{children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/webp",onChange:d=>n(Array.from(d.target.files)),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-smd-soft-green/10 file:text-smd-soft-green hover:file:bg-smd-soft-green/20"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sube una o más imágenes en formato WEBP (máx. 1MB cada una)."})]})}function L({hotel:n,amenities:d}){const t=n.data,{data:s,setData:l,post:$,processing:x,errors:r}=N({_method:"PATCH",name:t.name||"",address:t.address||"",description:t.description||"",price_range:t.price_range||"",instagram:t.instagram||"",facebook:t.facebook||"",youtube:t.youtube||"",phone:t.phone||"",email:t.email||"",web:t.web||"",amenities:t.amenities.map(a=>a.id)||[],images:[],images_to_delete:[]}),g=d.data.map(a=>({value:a.id,label:a.name})),h=g.filter(a=>s.amenities.includes(a.value)),p=a=>{const v=a?a.map(u=>(u.__isNew__,u.value)):[];l("amenities",v)},f=a=>{l("images",[...s.images,...a])},b=a=>{l("images_to_delete",[...s.images_to_delete,a])},j=a=>{a.preventDefault(),C.post(route("admin.hotels.update",t),s,{forceFormData:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:`Editar Hotel: ${t.name}`}),e.jsx("h1",{className:"text-3xl font-bold",children:"Editar Hotel"}),e.jsxs("form",{onSubmit:j,className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Información General"}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",value:"Nombre del Hotel"}),e.jsx(m,{id:"name",value:s.name,onChange:a=>l("name",a.target.value),className:"mt-1 block w-full",isFocused:!0}),e.jsx(o,{message:r.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"price_range",value:"Rango de Precio ($, $$, $$$)"}),e.jsx(m,{id:"price_range",value:s.price_range,onChange:a=>l("price_range",a.target.value),className:"mt-1 block w-full"}),e.jsx(o,{message:r.price_range,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(i,{htmlFor:"address",value:"Dirección"}),e.jsx(m,{id:"address",value:s.address,onChange:a=>l("address",a.target.value),className:"mt-1 block w-full"}),e.jsx(o,{message:r.address,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(i,{htmlFor:"description",value:"Descripción"}),e.jsx("textarea",{id:"description",value:s.description,onChange:a=>l("description",a.target.value),rows:"5",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),e.jsx(o,{message:r.description,className:"mt-2"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-smd-dark",children:"Contacto y Redes Sociales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"phone",value:"Teléfono"}),e.jsx(m,{id:"phone",value:s.phone,onChange:a=>l("phone",a.target.value),className:"mt-1 w-full"}),e.jsx(o,{message:r.phone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",value:"Email"}),e.jsx(m,{id:"email",type:"email",value:s.email,onChange:a=>l("email",a.target.value),className:"mt-1 w-full"}),e.jsx(o,{message:r.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"web",value:"Página Web"}),e.jsx(m,{id:"web",type:"url",value:s.web,onChange:a=>l("web",a.target.value),className:"mt-1 w-full"}),e.jsx(o,{message:r.web,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"instagram",value:"Instagram"}),e.jsx(m,{id:"instagram",type:"url",value:s.instagram,onChange:a=>l("instagram",a.target.value),className:"mt-1 w-full"}),e.jsx(o,{message:r.instagram,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"facebook",value:"Facebook"}),e.jsx(m,{id:"facebook",type:"url",value:s.facebook,onChange:a=>l("facebook",a.target.value),className:"mt-1 w-full"}),e.jsx(o,{message:r.facebook,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"youtube",value:"YouTube"}),e.jsx(m,{id:"youtube",type:"url",value:s.youtube,onChange:a=>l("youtube",a.target.value),className:"mt-1 w-full"}),e.jsx(o,{message:r.youtube,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Comodidades (Amenities)"}),e.jsx(E,{isMulti:!0,options:g,defaultValue:h,onChange:p,className:"mt-1",placeholder:"Selecciona o escribe para crear...",formatCreateLabel:a=>`Añadir "${a}"`})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Galería de Imágenes"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:t.images.filter(a=>!s.images_to_delete.includes(a.id)).map(a=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a.url,className:"w-full h-32 object-cover rounded-md"}),e.jsx("button",{type:"button",onClick:()=>b(a.id),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(A,{className:"h-5 w-5"})})]},a.id))}),e.jsx(R,{onFilesAdded:f}),r.images&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.images})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(y,{href:route("admin.hotels.index"),className:"px-4 py-2 text-gray-600",children:"Cancelar"}),e.jsx(k,{disabled:x,className:"px-6 py-2 bg-smd-soft-green text-white font-bold rounded-lg hover:bg-green-700 disabled:bg-gray-400",children:"Actualizar Hotel"})]})]})]})}L.layout=n=>e.jsx(F,{children:n,title:"Editar Hotel"});export{L as default};
