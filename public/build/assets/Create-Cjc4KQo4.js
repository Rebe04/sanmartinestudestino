import{r as d,R as _,u as w,j as e,H as C,L as k}from"./app-CirTf5Yo.js";import{A as D}from"./AdminLayout-Sqp-eTC1.js";import{h as P,R as E,C as R}from"./he-BDX7hf7m.js";import"./ApplicationLogo-BvZcoxD7.js";import"./logoWhite-C0-n3M0p.js";import"./NewspaperIcon-zyxNcIO2.js";import"./Dropdown-CgCWHkPA.js";import"./transition-I90Zg0OX.js";import"./react-select-creatable.esm-DOtFPnlq.js";import"./index-Br65vfOr.js";function F({postCategories:o}){const[x,n]=d.useState(!1),[c,g]=d.useState(null),i=_.useRef(null),u={toolbar:[[{header:[1,2,3,4,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["code-block"],["clean"]]},{data:s,setData:r,post:p,processing:h,errors:a,transform:f}=w({name:"",extract:"",content:"",post_category_id:"",new_category_name:"",status:"1",image:null});d.useEffect(()=>{f(t=>({...t,content:P.decode(t.content)}))},[]);const l=t=>{t.preventDefault(),t.stopPropagation(),t.type==="dragenter"||t.type==="dragover"?n(!0):t.type==="dragleave"&&n(!1)},b=t=>{t.preventDefault(),t.stopPropagation(),n(!1),t.dataTransfer.files&&t.dataTransfer.files[0]&&m(t.dataTransfer.files[0])},j=t=>{t.preventDefault(),t.target.files&&t.target.files[0]&&m(t.target.files[0])},m=t=>{if(t.type!=="image/webp"){alert("Por favor, sube solo imágenes en formato WEBP.");return}if(t.size>1024*1024){alert("La imagen no puede pesar más de 1MB.");return}r("image",t),g(URL.createObjectURL(t))},y=()=>{i.current.click()},v=t=>{t.isNew?r({...s,post_category_id:"",new_category_name:t.value}):r({...s,post_category_id:t.value,new_category_name:""})},N=t=>{t.preventDefault(),p(route("admin.posts.store"))};return e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Crear Nuevo Post"}),e.jsx("h1",{className:"text-3xl font-bold text-smd-dark",children:"Crear Nuevo Post"}),e.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-md p-6",children:e.jsxs("form",{onSubmit:N,onDragEnter:l,children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Título del Post"}),e.jsx("input",{type:"text",id:"name",value:s.name,onChange:t=>r("name",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}),a.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"extract",className:"block text-sm font-medium text-gray-700",children:"Extracto (para SEO y vistas previas)"}),e.jsx("textarea",{id:"extract",value:s.extract,onChange:t=>r("extract",t.target.value),rows:"3",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}),a.extract&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.extract})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contenido"}),e.jsx(E,{theme:"snow",value:s.content,onChange:t=>r("content",t),modules:u,className:"mt-1 bg-white"}),a.content&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.content})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"post_category_id",className:"block text-sm font-medium text-gray-700",children:"Categoría"}),e.jsx(R,{options:o.data,value:s.post_category_id,onChange:v,placeholder:"Selecciona o escribe para crear...",error:a.post_category_id||a.new_category_name}),a.post_category_id&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.post_category_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Imagen Destacada"}),e.jsxs("div",{className:`mt-1 h-64 border-2 border-dashed rounded-md flex flex-col justify-center items-center text-center ${x?"border-smd-soft-green bg-green-50":"border-gray-300"}`,onDragEnter:l,onDragLeave:l,onDragOver:l,onDrop:b,children:[e.jsx("input",{ref:i,type:"file",accept:"image/webp",className:"hidden",onChange:j}),c?e.jsx("img",{src:c,alt:"Vista previa",className:"h-full w-full object-contain p-2"}):e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Arrastra y suelta tu imagen aquí"}),e.jsx("p",{className:"text-sm text-gray-400 my-2",children:"o"}),e.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-gray-200 rounded-md text-sm font-semibold hover:bg-gray-300",children:"Seleccionar Archivo"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"WEBP de menos de 1MB"})]})]}),a.image&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.image})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Estado"}),e.jsxs("select",{id:"status",value:s.status,onChange:t=>r("status",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[e.jsx("option",{value:"1",children:"Borrador"}),e.jsx("option",{value:"2",children:"Publicado"})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end items-center gap-smd-16",children:[e.jsx(k,{href:route("admin.posts.index"),className:"text-gray-600 hover:underline mr-4",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-smd-soft-green text-white font-bold rounded-lg hover:bg-green-700 disabled:bg-gray-400",children:"Crear Post"})]})]})})]})}F.layout=o=>e.jsx(D,{children:o,title:"Crear Post"});export{F as default};
