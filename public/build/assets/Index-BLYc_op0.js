import{r as i,u as D,j as e,H as L,L as r}from"./app-23aZrtaW.js";import{A as $}from"./AdminLayout-BaNJbCUY.js";import{P as q}from"./Pagination-BjCmFclT.js";import{M as S,S as A}from"./SecondaryButton-Q3SI3VNH.js";import{D as B}from"./DangerButton-ByW9em3r.js";import{F as _,a as N,b as y}from"./TrashIcon-0vIoZ3MA.js";import{F as w,a as v}from"./QrCodeIcon-C-x-65EZ.js";import{F as C}from"./CheckIcon-CEsGuWYE.js";import{F as R}from"./EyeIcon-8vc0WhNL.js";import"./ApplicationLogo-D-kKVd4A.js";import"./logoWhite-C0-n3M0p.js";import"./NewspaperIcon-F11gz-j-.js";import"./MapIcon-ZO0o0V-p.js";import"./Dropdown-_YoY5Am2.js";import"./transition-D30kd9CN.js";import"./index-bKaOaWek.js";function Q({posts:l}){const{data:c,meta:k}=l,[P,m]=i.useState(!1),[x,h]=i.useState(null),{delete:E,processing:U}=D(),u=s=>{h(s),m(!0)},[j,f]=i.useState(null),p=s=>{const n=route("posts.show",s);navigator.clipboard.writeText(n).then(()=>{f(s.id),setTimeout(()=>{f(null)},2e3)}).catch(d=>{console.error("Error al copiar la URL: ",d),alert("No se pudo copiar la URL.")})},g=s=>{const n=route("posts.show",s),d=`https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(n)}`;fetch(d).then(a=>a.blob()).then(a=>{const b=window.URL.createObjectURL(a),t=document.createElement("a");t.href=b,t.setAttribute("download",`qr-${s.slug}.png`),document.body.appendChild(t),t.click(),t.parentNode.removeChild(t),window.URL.revokeObjectURL(b)}).catch(a=>{console.error("Error al descargar el QR:",a),alert("No se pudo descargar el código QR.")})},o=()=>{m(!1),h(null)},F=s=>{s.preventDefault(),E(route("admin.posts.destroy",x),{onSuccess:()=>o()})};return e.jsxs("div",{children:[e.jsx(L,{title:"Gestionar Blog"}),e.jsxs("div",{className:"flex justify-between items-center mb-6 gap-smd-16",children:[e.jsx("h1",{className:"text-3xl font-bold text-smd-dark",children:"Posts del Blog"}),e.jsxs(r,{href:route("admin.posts.create"),className:"inline-flex items-center gap-2 text-sm md:text-smd-16 bg-smd-soft-green text-white font-bold px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(_,{className:"h-5 w-5"}),"Crear Post"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsxs("table",{className:"w-full hidden md:table",children:[e.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-left text-sm font-semibold text-gray-600 uppercase",children:"Título"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold text-gray-600 uppercase",children:"Categoría"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold text-gray-600 uppercase",children:"Estado"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold text-gray-600 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{children:c.map(s=>(route("posts.show",s),e.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[e.jsxs("td",{className:"p-4 flex items-center",children:[e.jsx("img",{src:s.image_url,alt:s.name,className:"w-10 h-10 rounded-md object-cover mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-smd-dark",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Por: ",s.user.name]})]})]}),e.jsx("td",{className:"p-4 text-gray-700",children:e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:s.category.name})}),e.jsx("td",{className:"p-4",children:s.status==2?e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Publicado"}):e.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Borrador"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(s),className:"text-gray-500 hover:text-purple-600",title:"Descargar Código QR",children:e.jsx(w,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>p(s),className:"text-gray-500 hover:text-smd-soft-green relative",title:"Copiar URL",children:j===s.id?e.jsx(C,{className:"h-5 w-5 text-smd-soft-green"}):e.jsx(v,{className:"h-5 w-5"})}),e.jsx(r,{target:"_blank",href:route("posts.show",s),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:e.jsx(R,{className:"h-5 w-5"})}),e.jsx(r,{href:route("admin.posts.edit",s),className:"text-orange-400 hover:text-orange-900",title:"Editar",children:e.jsx(N,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>u(s),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:e.jsx(y,{className:"h-5 w-5"})})]})})]},s.id)))})]}),e.jsx("div",{className:"md:hidden divide-y divide-gray-200",children:c.map(s=>(route("posts.show",s),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("img",{src:s.image_url,alt:s.name,className:"w-16 h-16 rounded-md object-cover mr-4 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-smd-dark",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Por: ",s.user.name]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Categoría:"}),e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:s.category.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Estado:"}),s.status==2?e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Publicado"}):e.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Borrador"})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t mt-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Acciones:"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("button",{onClick:()=>g(s),className:"text-gray-500 hover:text-purple-600",title:"Descargar Código QR",children:e.jsx(w,{className:"h-6 w-6"})}),e.jsx("button",{onClick:()=>p(s),className:"text-gray-500 hover:text-smd-soft-green relative",title:"Copiar URL",children:j===s.id?e.jsx(C,{className:"h-5 w-5 text-smd-soft-green"}):e.jsx(v,{className:"h-6 w-6"})}),e.jsx(r,{target:"_blank",href:route("posts.show",s),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:e.jsx(R,{className:"h-6 w-6"})}),e.jsx(r,{href:route("admin.posts.edit",s.id),className:"text-blue-600 hover:text-blue-900",children:e.jsx(N,{className:"h-6 w-6"})}),e.jsx("button",{onClick:()=>u(s),className:"text-red-600 hover:text-red-900",children:e.jsx(y,{className:"h-6 w-6"})})]})]})]})]},s.id)))})]}),e.jsx("div",{className:"mt-6",children:e.jsx(q,{links:k.links})}),e.jsx(S,{show:P,onClose:o,children:e.jsxs("form",{onSubmit:F,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"¿Estás seguro de que quieres eliminar este post?"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Una vez que el post sea eliminado, todos sus recursos y datos se borrarán permanentemente.",e.jsx("br",{}),e.jsxs("span",{className:"font-bold",children:['"',x?.name,'"']})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(A,{onClick:o,children:"Cancelar"}),e.jsx(B,{className:"ms-3",disabled:U,children:"Eliminar Post"})]})]})})]})}Q.layout=l=>e.jsx($,{children:l,title:"Posts"});export{Q as default};
