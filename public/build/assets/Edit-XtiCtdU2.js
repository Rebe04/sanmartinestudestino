import{r as n,u as p,j as e,H as h,L as j,a as b}from"./app-23aZrtaW.js";import{A as v}from"./AdminLayout-BaNJbCUY.js";import{h as f,R as y,C as _}from"./he-B9dk1kBQ.js";import{D as w}from"./DragImage-mOvZD5nG.js";import"./ApplicationLogo-D-kKVd4A.js";import"./logoWhite-C0-n3M0p.js";import"./NewspaperIcon-F11gz-j-.js";import"./MapIcon-ZO0o0V-p.js";import"./Dropdown-_YoY5Am2.js";import"./transition-D30kd9CN.js";import"./react-select-creatable.esm-Bdc-qCLG.js";import"./Select-ef7c0426.esm-BIMYpt9T.js";import"./index-bKaOaWek.js";function N({post:l,postCategories:d}){const s=l.data,[i,C]=n.useState(s.image_url),c={toolbar:[[{header:[1,2,3,4,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["code-block"],["clean"]]},{data:r,setData:o,post:k,processing:m,errors:a,transform:x}=p({_method:"PATCH",name:s.name||"",extract:s.extract||"",content:s.content||"",post_category_id:s.category?.id||"",new_category_name:"",status:s.status||"1",image:null});n.useEffect(()=>{x(t=>({...t,content:f.decode(t.content)}))},[]);const u=t=>{t.isNew?o({...r,post_category_id:"",new_category_name:t.value}):o({...r,post_category_id:t.value,new_category_name:""})},g=t=>{t.preventDefault(),b.post(route("admin.posts.update",s),r,{forceFormData:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(h,{title:`Editar Post: ${s.name}`}),e.jsx("h1",{className:"text-3xl font-bold text-smd-dark",children:"Editar Post"}),e.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-md p-6",children:e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Título"}),e.jsx("input",{type:"text",value:r.name,onChange:t=>o("name",t.target.value),className:"mt-1 block w-full rounded-md"}),a.name&&e.jsx("p",{className:"text-sm text-red-600",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Extracto"}),e.jsx("textarea",{value:r.extract,onChange:t=>o("extract",t.target.value),rows:"3",className:"mt-1 block w-full rounded-md"}),a.extract&&e.jsx("p",{className:"text-sm text-red-600",children:a.extract})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Contenido"}),e.jsx(y,{theme:"snow",value:r.content,onChange:t=>o("content",t),modules:c,className:"mt-1 bg-white"}),a.content&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.content})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Categoría"}),e.jsx(_,{options:d.data,value:r.post_category_id,onChange:u,placeholder:"Selecciona o crea una categoría...",error:a.post_category_id||a.new_category_name})]}),e.jsx(w,{imagePreviewData:i,errors:a,setData:o}),e.jsxs("div",{children:[e.jsx("label",{children:"Estado"}),e.jsxs("select",{value:r.status,onChange:t=>o("status",t.target.value),className:"mt-1 block w-full rounded-md",children:[e.jsx("option",{value:"1",children:"Borrador"}),e.jsx("option",{value:"2",children:"Publicado"})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end items-center gap-smd-16",children:[e.jsx(j,{href:route("admin.posts.index"),className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-smd-soft-green text-white font-bold rounded-lg hover:bg-green-700 disabled:bg-gray-400",children:"Actualizar Post"})]})]})})]})}N.layout=l=>e.jsx(v,{children:l,title:"Editar Post"});export{N as default};
